<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tic Tac Toe 3D Online - Juego Multijugador</title>
    <meta name="description" content="Juega Tic Tac Toe 3D en l铆nea con amigos. Versi贸n multijugador del cl谩sico juego en 3D con 4x4x4 tablero.">
    <meta name="keywords" content="tic tac toe, 3d, multijugador, juego online, 4 en raya, 3d game">
      <link rel="stylesheet" href="/static/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.min.js"></script>
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22></text></svg>">
</head>
<body>
    <div class="online-badge">
        <i class="fas fa-wifi"></i>
        <span>JUGAR ONLINE</span>
    </div>
    
    <div class="container">
        <!-- LOBBY -->
        <div id="lobby" class="lobby">
            <div class="header-animation">
                <h1><i class="fas fa-cube"></i> TIC TAC TOE 3D ONLINE</h1>
                <p class="subtitle">Juega en l铆nea con amigos desde cualquier lugar</p>
            </div>
            

            <div class="quick-play-buttons">
                <button class="quick-play-btn create" onclick="quickCreateGame()">
                    <i class="fas fa-plus-circle"></i> CREAR SALA RPIDO
                </button>
                <button class="quick-play-btn join" onclick="showJoinForm()">
                    <i class="fas fa-sign-in-alt"></i> UNIRSE A SALA
                </button>
            </div>
            
            <div class="form-group">
                <div class="input-with-icon">
                    <i class="fas fa-user"></i>
                    <input type="text" id="playerName" placeholder="Tu nombre de jugador" value="Jugador" maxlength="15">
                </div>
                <button class="btn-primary" onclick="createGame()">
                    <i class="fas fa-gamepad"></i> Crear Nueva Sala
                </button>
            </div>
            
            <div id="joinSection" class="form-group" style="display: none;">
                <div class="input-with-icon">
                    <i class="fas fa-key"></i>
                    <input type="text" id="roomCode" placeholder="C贸digo de 6 letras" maxlength="6" style="text-transform: uppercase;">
                </div>
                <button class="btn-secondary" onclick="joinGame()">
                    <i class="fas fa-users"></i> Unirse a Sala
                </button>
            </div>
            
            <div id="roomInfo" class="hidden">
                <div class="room-card">
                    <h2><i class="fas fa-door-open"></i> Sala: <span id="roomCodeDisplay"></span></h2>
                    <p>Comparte este c贸digo con tu amigo:</p>
                    <div class="code-display" id="shareCode"></div>
                    <div class="copy-btn" onclick="copyRoomCode()">
                        <i class="fas fa-copy"></i> Copiar C贸digo
                    </div>
                    <p id="waitingMessage" class="waiting-message">
                        <i class="fas fa-hourglass-half"></i> Esperando al segundo jugador...
                    </p>
                    <div id="playerList"></div>
                </div>
            </div>
            
            <div class="instructions-panel">
                <h3><i class="fas fa-graduation-cap"></i> 驴C贸mo Jugar?</h3>
                <ul class="instructions-list">
                    <li><i class="fas fa-check-circle"></i> <strong>Crea una sala</strong> y comparte el c贸digo con un amigo</li>
                    <li><i class="fas fa-check-circle"></i> <strong>Alterna turnos</strong> para colocar X (azul) u O (rojo)</li>
                    <li><i class="fas fa-check-circle"></i> <strong>Gana haciendo 4 en l铆nea</strong> en cualquier direcci贸n (13 formas posibles)</li>
                    <li><i class="fas fa-check-circle"></i> <strong>Juega en 4 capas (3D)</strong> - Piensa en profundidad!</li>
                    <li><i class="fas fa-check-circle"></i> <strong>Reinicia o sal</strong> despu茅s de cada partida</li>
                </ul>
            </div>
            
            <div class="social-share">
                <h3><i class="fas fa-share-alt"></i> Compartir Juego</h3>
                <a href="#" class="share-btn whatsapp" onclick="shareOnWhatsApp()">
                    <i class="fab fa-whatsapp"></i> WhatsApp
                </a>
                <a href="#" class="share-btn telegram" onclick="shareOnTelegram()">
                    <i class="fab fa-telegram"></i> Telegram
                </a>
                <button class="share-btn" onclick="copyGameLink()">
                    <i class="fas fa-link"></i> Copiar Enlace
                </button>
            </div>
            
            <div class="footer">
                <p>Tic Tac Toe 3D Online - Creado por Panam 漏 2024</p>
                <p>Juega desde cualquier dispositivo con conexi贸n a internet</p>
            </div>
        </div>
        
        <!-- JUEGO -->
        <div id="game" class="game hidden">
            <div class="game-header">
                <div class="room-info">
                    <h2><i class="fas fa-cube"></i> TIC TAC TOE 3D</h2>
                    <div class="room-badge">
                        <i class="fas fa-door-closed"></i> Sala: <span id="roomCodeDisplayGame"></span>
                    </div>
                </div>
                
                <div class="player-info">
                    <div class="player-card" id="playerX">
                        <div class="player-header">
                            <span class="symbol">X</span>
                            <span class="player-name" id="playerXName">Jugador 1</span>
                        </div>
                        <div class="player-status">
                            <div class="indicator" id="indicatorX">
                                <i class="fas fa-circle"></i>
                            </div>
                            <span class="status-text">Es tu turno</span>
                        </div>
                    </div>
                    
                    <div class="vs-separator">
                        <span>VS</span>
                    </div>
                    
                    <div class="player-card" id="playerO">
                        <div class="player-header">
                            <span class="symbol">O</span>
                            <span class="player-name" id="playerOName">Jugador 2</span>
                        </div>
                        <div class="player-status">
                            <div class="indicator" id="indicatorO">
                                <i class="fas fa-circle"></i>
                            </div>
                            <span class="status-text">Esperando</span>
                        </div>
                    </div>
                </div>
                
                <div id="turnIndicator" class="turn-indicator">
                    <i class="fas fa-chess-board"></i> Turno del Jugador 1 (X)
                </div>
            </div>
            
            <div class="game-board">
                <div class="board-header">
                    <h3><i class="fas fa-layer-group"></i> Tablero 3D (4x4x4)</h3>
                    <div class="coordinates-help">
                        <span><i class="fas fa-info-circle"></i> Coordenadas: Capa (Z) - Fila (Y) - Columna (X)</span>
                    </div>
                </div>
                
                <div class="layers-container">
                    <!-- Las 4 capas se generar谩n con JavaScript -->
                </div>
            </div>
            
            <div class="controls">
                <button class="control-btn restart-btn" onclick="resetCurrentGame()" id="btnRestart">
                    <i class="fas fa-redo"></i> Reiniciar Juego
                </button>
                <button class="control-btn exit-btn" onclick="leaveGame()" id="btnExit">
                    <i class="fas fa-sign-out-alt"></i> Salir de Sala
                </button>
                <button class="control-btn help-btn" onclick="showGameInstructions()">
                    <i class="fas fa-question-circle"></i> Ayuda
                </button>
            </div>
            
            <div id="message" class="message"></div>
            
            <div class="score-board">
                <div class="score-card">
                    <div class="score-header">
                        <i class="fas fa-trophy"></i> Marcador
                    </div>
                    <div class="score-content">
                        <div class="score-item">
                            <span class="score-player x-player">Jugador X:</span>
                            <span class="score-value" id="scoreX">0</span>
                        </div>
                        <div class="score-item">
                            <span class="score-player draw-player">Empates:</span>
                            <span class="score-value" id="scoreDraw">0</span>
                        </div>
                        <div class="score-item">
                            <span class="score-player o-player">Jugador O:</span>
                            <span class="score-value" id="scoreO">0</span>
                        </div>
                    </div>
                </div>
                
                <div class="chat-widget">
                    <div class="chat-header">
                        <i class="fas fa-comments"></i> Chat del Juego
                    </div>
                    <div class="chat-messages" id="chatMessages">
                        <div class="chat-message system">
                            <span class="chat-time">Ahora</span>
                            <span class="chat-text">Bienvenido al juego! Escribe mensajes aqu铆.</span>
                        </div>
                    </div>
                    <div class="chat-input">
                        <input type="text" id="chatInput" placeholder="Escribe un mensaje..." maxlength="100">
                        <button onclick="sendChatMessage()">
                            <i class="fas fa-paper-plane"></i>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- DILOGO DE FELICITACIONES -->
    <div id="winDialogOverlay" class="win-dialog-overlay hidden">
        <div class="win-dialog-content">
            <div class="confetti-container">
                <!-- Confeti generado din谩micamente -->
            </div>
            <div class="winner-crown">
                <i class="fas fa-crown"></i>
            </div>
            <h2 id="winTitle">隆FELICIDADES!</h2>
            <p id="winMessage"></p>
            <div class="dialog-buttons">
                <button class="dialog-btn btn-restart" onclick="resetCurrentGame()">
                    <i class="fas fa-redo"></i> JUGAR OTRA VEZ
                </button>
                <button class="dialog-btn btn-exit" onclick="leaveGame()">
                    <i class="fas fa-home"></i> VOLVER AL INICIO
                </button>
                <button class="dialog-btn btn-share" onclick="shareVictory()">
                    <i class="fas fa-share"></i> COMPARTIR VICTORIA
                </button>
            </div>
            <div class="winning-player">
                <div class="player-avatar">
                    <i class="fas fa-user-tie"></i>
                </div>
                <div class="player-info-win">
                    <span class="player-name-win" id="winnerNameDisplay"></span>
                    <span class="player-stats" id="winnerStats"></span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- INSTRUCCIONES DEL JUEGO -->
    <div id="instructionsModal" class="modal-overlay hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3><i class="fas fa-book-open"></i> Instrucciones del Juego</h3>
                <button class="modal-close" onclick="closeInstructions()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="instruction-section">
                    <h4><i class="fas fa-cube"></i> 驴Qu茅 es Tic Tac Toe 3D?</h4>
                    <p>Es la versi贸n tridimensional del cl谩sico Tres en Raya. En lugar de un tablero plano 3x3, es un cubo 4x4x4 donde debes alinear 4 fichas en l铆nea.</p>
                </div>
                
                <div class="instruction-section">
                    <h4><i class="fas fa-trophy"></i> C贸mo Ganar</h4>
                    <p>Hay 13 formas de hacer 4 en l铆nea:</p>
                    <ul>
                        <li>4 horizontales en una capa</li>
                        <li>4 verticales en una capa</li>
                        <li>4 en profundidad (misma posici贸n en 4 capas)</li>
                        <li>10 diagonales en 2D y 3D</li>
                    </ul>
                </div>
                
                <div class="instruction-section">
                    <h4><i class="fas fa-gamepad"></i> Controles</h4>
                    <ul>
                        <li><strong>Click:</strong> Colocar ficha en celda vac铆a</li>
                        <li><strong>Turnos:</strong> Alternados autom谩ticamente</li>
                        <li><strong>Reiniciar:</strong> Jugar otra vez despu茅s de ganar/empate</li>
                        <li><strong>Salir:</strong> Volver al lobby para crear/uniros a otra sala</li>
                    </ul>
                </div>
                
                <div class="instruction-section">
                    <h4><i class="fas fa-users"></i> Multijugador Online</h4>
                    <p>Para jugar con amigos:</p>
                    <ol>
                        <li>Un jugador crea sala y copia el c贸digo</li>
                        <li>Comparte el c贸digo por WhatsApp/Telegram</li>
                        <li>El otro jugador ingresa el c贸digo</li>
                        <li>隆Ambos juegan en tiempo real!</li>
                    </ol>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-primary" onclick="closeInstructions()">
                    <i class="fas fa-check"></i> Entendido, 隆a jugar!
                </button>
            </div>
        </div>
    </div>
    
    <!-- SONIDOS (ocultos) -->
    <audio id="moveSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-select-click-1109.mp3" type="audio/mpeg">
    </audio>
    <audio id="winSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-winning-chimes-2015.mp3" type="audio/mpeg">
    </audio>
    <audio id="drawSound" preload="auto">
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-game-show-wrong-answer-buzz-950.mp3" type="audio/mpeg">
    </audio>
    
    <script src="/static/game.js"></script>
</body>
</html>
